<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div id="movieDataDisplay">
      <div>
        <img src="" alt="" />
      </div>
      <div>
        <h3></h3>
        <span></span>
      </div>
    </div>
  </body>

  <script>
    const movieDataDisplay = document.getElementById("movieDataDisplay");

    const params = new URLSearchParams(window.location.search);
    const productId = params.get("id");
    console.log(productId);

    let token =
      "eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI5YjVjMDlhMGQ0NjU4YzVlN2M2YWE4YTY3YjEyOWE2MCIsIm5iZiI6MTc1NzQ1NTYwOC41NDIsInN1YiI6IjY4YzBhNGY4ZTViMGM2ZWI3ZDk0ODk2MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.b9ClJy_rTZ9hlbsRY8A2zoaDylnKDTTveWQoWp5o8Ys";
    const baseUrl = "https://api.themoviedb.org/3";
    const imgBaseUrl = "https://image.tmdb.org/t/p/w500";
    const options = {
      headers: {
        Authorization: `Bearer ${token}`,
      },
    };

    const movieById = async () => {
      try {
        console.log("Hell");
        const movieRes = await fetch(`${baseUrl}/movie/${id}`, options);
        const movieData = await movieRes.json();
        console.log(movieData);
        
      } catch (error) {
        console.log(error);
      } finally {
        console.log("Redirecting");
      }
    };

    // console.log(movieById);

    // movieDataDisplay.innerHTML = `
    // <div class="w-[90%] m-auto flex gap-10 ">
    //     <div class=" rounded-xl"><img class = "w-full rounded-xl"  src="${imgBaseUrl}${movieObj.poster_path}" alt="" /></div>
    //     <div class="flex-col space-y-4">
    //       <div>
    //         <h1 class="text-4xl font-bold">${movieObj.title} <span class="text-3xl">(2025)</span>
    //         </h1>
    //         <span>${movieObj.release_date} (${movieObj.origin_country})</span> . <span>${movieObj.genres[0].name} , ${movieObj.genres[1].name}</span>.<span></span>
    //       </div>
    //       <div class = "mt-5" >
    //         <p>userscore</p>
    //       </div>
    //       <div>icons</div>

    //       <div class="space-y-2">
    //         <h1 class="text-xl font-medium">Overview</h1>
    //         <p>${movieObj.overview}</p>
    //       </div>
    //       <div><h1 class = "text-xl font-bold">Production Companies</h1>
    //         <p>${movieObj.production_companies[0].name} </P>
    //         </div>
    //     </div>
    //   </div>
    // `;

    movieById();
  </script>
</html>
