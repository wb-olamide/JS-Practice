<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/src/output.css" />
    <title>LogIn Page</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&  "
    />
  </head>
  <body class="bg-gray-700">
    <div class="w-[30%] flex justify-center mt-[40vh] m-auto">
      <div class="m-auto flex items-center gap-2">
        <div class="space-y-5 bg-black rounded-xl py-10 px-5">
          <div>
            <input
              id="userName"
              type="text"
              placeholder="Username"
              class="w-[350px] text-white h-[60px] p-2 text-xl border-white border-2 border"
            />
          </div>
          <div class="relative">
            <input
              id="display"
              type="password"
              placeholder="password"
              class="w-[350px] text-white h-[60px] p-2 text-xl border-white border-2 border"
            />
            <div class="flex items-center absolute top-4 right-3">
              <span
                id="first"
                onclick=" show()"
                class="material-symbols-outlined cursor-pointer text-white"
              ></span>
            </div>
          </div>

          <div>
            <button
              id="logInBtn"
              class="bg-white text-lg font-medium rounded-xl py-2 px-4"
            >
              Log In
            </button>
          </div>
        </div>
      </div>
    </div>
    <script>
      const display = document.getElementById("display");
      const userName = document.getElementById("userName");

      const first = document.getElementById("first");
      const second = document.getElementById("second");
      // second.style.display = "none";
      first.innerText = "visibility_off";

      function show() {
        if (display.type == "password") {
          display.type = "text";
          first.innerText = "visibility_off";
        } else if (display.type == "text") {
          display.type = "password";
          first.innerText = "visibility";
        }
      }

      //   fetch("https://dummyjson.com/auth/login", {
      //     method: "POST",
      //     headers: { "Content-Type": "application/json" },
      //     body: JSON.stringify({
      //       username: "emilys",
      //       password: "emilyspass",
      //       expiresInMins: 30, // optional, defaults to 60
      //     }),
      //     credentials: "include", // Include cookies (e.g., accessToken) in the request
      //   })
      //     .then((res) => res.json())
      //     .then(console.log);

      logInBtn.addEventListener("click", async () => {
        console.log("whattt");
        const response = await fetch("https://dummyjson.com/auth/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            username: userName.value,
            password: display.value,
            expiresInMins: 30, // optional, defaults to 60
          }),
        });
        const data = await response.json();
        console.log(data);
        localStorage.setItem("setToken", JSON.stringify(data.accessToken));
        window.location.href = "./homepage.html";
      });
    </script>
  </body>
</html>
